<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta http-equiv="imagetoolbar" content="no">
  <link rel="icon" href="/srv/img/favicon.gif" type="image/gif">

<!--additional header info goes here-->
  <meta name="keywords" content="svg, textbox">
  <meta name="description" content="textbox for svg applications">
  <style type="text/css">
body {background-image:url('http://www.carto.net/srv/img/backmap.gif'); background-repeat:no-repeat; background-color:#ffef95; font-family:Arial,Helvetica,Geneva,sans-serif;color:#B42D25; }

/*B42D25 ~ rgb(180,44,37) bordeauxrot*/
/*161682 ~ rgb(23,23,130) dklblau */
/*168C16 ~ rgb(23,140,23) dklgruen */
/*ffef95 ~ rgb(255,239,149) bg-gelb */

a {text-decoration:underline; color:#168C16; background: transparent}

h2 a {text-decoration:none;}

.inpage { color:#168C16;}
.expage { color:#161682;}

a:visited {text-decoration:none;}


/*
a.inpage:visited {color:#6C6F12; background: transparent}
a.expage:visited {color:#6C125D; background: transparent}
*/

@media screen {  /* hide from IE3 */
a[href]:hover { background: #ffa }
}




.lde {background-image:url('http://www.carto.net/srv/img/back_l_de.gif'); }
.lfr {background-image:url('http://www.carto.net/srv/img/back_l_fr.gif'); }
.len {background-image:url('http://www.carto.net/srv/img/back_l_en.gif'); }
.les {background-image:url('http://www.carto.net/srv/img/back_l_es.gif'); }

.higher { font-weight:bold; } /*TO BE REMOVED*/
.bigger { font-weight:bold; }
.smaller { font-size:small;}

.chrihelptd { background-color:#FFEF95; } /*tabellen hintergrund in christans hilfen sollet allgem hintergrund entsprechen*/

.newspostit { background-color:#f6ffd8;}


p,h1,h2,h3,h4,ul,ol,li,div,td,th,address,blockquote,b,i,.keepnormfontcolor { font-family:Arial,Helvetica,Geneva,sans-serif; color:#B42D25 }
tt,pre { font-family:"Courier New",Courier,monospace; color:#B42D25; }


.info { border:1px solid; background-color:#eeeeee; padding:40px; margin:0px; }
.info tt, .info pre { font-family:"Courier New",Courier,monospace; color:blue; }

  </style>
  <title>carto:net - 

 SVG Textbox
</title>
</head>
<body><a name="top"></a>

<table width="100%">
	<tr>
		<td align="left">
			<img src="http://www.carto.net/srv/img/navig.gif" alt="" usemap="#navig" border="0" width="600" height="111">
		</td>
	</tr>
</table>
<!-- ONLY navig.gif IMG NEEDED NORMALLY -->
<map name="navig">
  <area shape="rect" coords="226,14,585,66" href="http://www.carto.net/" target="_top" alt="main page - page initiale - hauptseite - página principal">
  <area shape="rect" coords="272,77,433,106" href="http://www.carto.net/projects/" alt="projects - projets - projekte - proyectos">
  <area shape="rect" coords="454,77,598,106" href="http://www.carto.net/authors/" alt="authors - auteurs - autoren - autores">
  <area shape="rect" coords="130,77,253,106" href="http://www.carto.net/papers/" alt="papers - exposés - berichte - papeles">
  <area shape="rect" coords="25,77,109,106" href="http://www.carto.net/help/" alt="help - aide - hilfe - ayuda">
</map>


<div id="adBarContainer" style="margin-left:13px;float:right;right:8px;width:160px;height:600px;border:0px solid red;">
<script type="text/javascript"><!--
google_ad_client = "pub-6049981187637171";
	/* 160x600, Carto.net Standard */
	google_ad_slot = "4746507232";
	google_ad_width = 160;
	google_ad_height = 600;
//-->
</script>
<script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script>
</div>






  <h2 class="sitemap"><a href="/">carto</a><span class="expage">:</span><a href="/papers/">papers</a><span class="expage">:</span><a href="/papers/svg/">svg</a><span class="expage">:</span><a href="/papers/svg/samples/">examples</a><span class="expage">:</span><a href="/papers/svg/samples/#iact">interactivity and svg gui</a><span class="expage">:</span>textbox</h2>

<h2>SVG Textbox, Version 1.1.2, 2006-10-04, (see history at the end of the page)</h2>

<p>This SVG textbox object should assist authors of SVG webapplications in creating user interfaces.</p>

<p>Why should you create SVG only web applications? Advantages of SVG only applications are flexiblity (you can control every single aspect of a SVG GUI element) and scalability (in SVG your userinterface elements are scalable as well). If you need a pixel-precise, scalable application, HTML is not very well suited, since HTML form elements don't scale well. SVG also potentially allows more sophisticated GUI elements than HTML provides, such as slider, dial knobs, complex colourpickers, etc. Disadvantages include complexity (more complex than using HTML form elements) and a potentially bad user experience, if your SVG GUI elements behave different than native GUI elements of the operating system the user is used to. Some browsers still don't support SVG to HTML or HTML to SVG communication. In that case you are sort of locked into doing everything with SVG in order to reach the broadest audience. Another advantage of creating SVG only applications is, that your applications also work in SVG viewers outside the webbrowser (e.g. Batik, eSVG or SVG embedded applications).</p>

<p>See an <a href="index.svg">example</a> of the SVG textbox object. The scripts had been tested in Adobe SVG viewer version 3, version 6, Opera 9, Firefox/Mozilla SVG and Batik. There are limitations in Firefox 1.5 and 2.0 due to unimplemented DOM methods on text nodes (see below). In Opera 9 there are limitations because some special character keys collide with functional keys (see below)</p>
<p>The textbox is free to use. If you do any substantial improvements, please send back your improvements to the author. The GUI elements of carto.net are licensed under the terms of the LGPL license and you need to distribute the license with your code. Additionally, you should create a link to carto.net in your project's "about page" or impressum. If you plan to use the GUI elements in a commercial product, please check back with the author of the GUI elements to investigate arrangements. The original URL for the textbox is http://www.carto.net/papers/svg/gui/textbox/.</p>
      <div class="info">
        <h3>Documentation</h3>
        <h4>Requirements</h4>
<p>To use the textbox, your project needs to meet the following requirements:</p>
<ul>
	<li>the svg root element needs to have a viewBox attribute set (e.g. <tt>viewBox="0 0 1100 700"</tt>)</li>
	<li>you need to link to the following scripts in your SVG header to use the textbox: <a href="../../resources/mapApp.js">mapApp.js</a>, <a href="../../resources/helper_functions.js">helper_functions.js</a>, <a href="../../resources/timer.js">timer.js</a> and <a href="textbox.js">textbox.js</a>; please note, that not all of the functions in these files are needed. The depencies are listed below.</li>
	<li>you need to include the global variable "myMapApp" of type "mapApp" into one of your js files, (e.g. <tt>var myMapApp = new mapApp();</tt>)</li>
	<li>you need to create an empty svg group element with a unique id in an appropriate position of your document tree to hold the graphics of the textbox (e.g. <tt>&lt;g id="textbox1" /&gt;</tt>)</li>
	<li>it is recommended to place a background rectangle behind your SVG application to receive events on the root element level, e.g. loosing focus and calling the callback function when clicking outside of the textbox</li>
	<li>you need to initialize the textbox as described below</li>
</ul>
       <h4>Features</h4>
       <ul>
       	<li>text larger than the textbox scrolls</li>
       	<li>text is selectable through mouse and keyboard</li>
       	<li>a list of valid characters can be specified, e.g. you can restrict a textbox to allow only digits</li>
       	<li>the maximum number of characters can be controlled</li>
       	<li>textbox is completely and individually stylable using arrays of literals containing presentation attributes</li>
		<li>textbox may be resized (width only) and repositioned</li>
       </ul>
       <h4>Dependencies on external functions</h4>
        <ol><li><a href="textbox.js">textbox.js</a>:
        	<ul><li>all of the objects and functions in this file are necessary</li></ul>
        </li>
        <li><a href="../../resources/mapApp.js">mapApp.js</a>:
        	<ul><li>all of the objects and functions in this file are necessary</li></ul>
        </li>
        	<li><a href="../../resources/timer.js">timer.js</a>:
        		<ul><li>all of the objects and functions in this file are necessary</li></ul>
        	</li>
        	<li><a href="../../resources/helper_functions.js">helper_functions.js</a>:
        	<ul>
        		<li>all the global variables at the top of the file</li>
        		<li>.getTransformToRootElement(node)</li>
        	</ul>
        </li>
        </ol>
        <h4>Constructor</h4>
        <p>The following constructor function creates the textbox:</p>
        <p><tt>var textbox = new textbox(id,parentNode,defaultVal,maxChars,x,y,boxWidth,boxHeight,textYOffset,textStyles,boxStyles,cursorStyles,selBoxStyles,allowedChars,functionToCall);</tt><br/>
	Example:<br/>
	<tt>//first a few styling parameters:<br />
var textStyles = {"font-family":"Arial,Helvetica","font-size":15,"fill":"dimgray"};<br />
var boxStyles = {"fill":"white","stroke":"dimgray","stroke-width":1.5};<br />
var cursorStyles = {"stroke":"red","stroke-width":1.5};<br />
var selBoxStyles = {"fill":"blue","opacity":0.5};<br />
textbox1 = new textbox("textbox1","textbox1","Textbox1",25,100,100,200,30,22,textStyles,boxStyles,cursorStyles,selBoxStyles,"[a-zA-Z ]",writeOutTextContent);</tt></p>
		<p>The arguments are the following:</p>
		<ol>
			<li><tt>id (String)</tt>:<br />unique id for the textbox</li>
			<li><tt>parentNode (String or node reference)</tt>:<br />group id or node reference to the parent group that will contain the textbox geometry</li>
			<li><tt>defaultVal (String)</tt>:<br />the initial text to be displayed after the textbox is created</li>
			<li><tt>maxChars (integer)</tt>:<br />the allowed maximum number of characters to be entered in the textbox</li>
			<li><tt>x (number, in viewBox coordinate system)</tt>:<br />left side of the textbox</li>
			<li><tt>y (number, in viewBox coordinate system)</tt>:<br />upper side of the textbox</li>
			<li><tt>boxWidth (number, in viewBox coordinate system)</tt>:<br />the width of the textbox</li>
			<li><tt>boxHeight (number, in viewBox coordinate system)</tt>:<br />the height of the textbox</li>
			<li><tt>textYOffset (number, in viewBox coordinate system)</tt>:<br />the offset of the text element in relation to the upper side of the textbox rectangle</li>
			<li><tt>textStyles (array of literals with presentation attributes)</tt>:<br />an array literal containing the presentation attributes of the textbox texts; could include CSS classes; should at least include a "font-size" attribute; example: <tt>var textStyles = {"font-family":"Arial,Helvetica","font-size":11,"fill":"dimgray"};</tt></li>
			<li><tt>boxStyles (array of literals with presentation attributes)</tt>:<br />an array literal containing the presentation attributes of the textbox; could include CSS classes; should at least include a "fill", "stroke" and "stroke-width" attribute; example: <tt>var boxStyles = {"fill":"white","stroke":"dimgray","stroke-width":1.5};</tt></li>
			<li><tt>cursorStyles (array of literals with presentation attributes)</tt>:<br />an array literal containing the presentation attributes of the textcursor; could include CSS classes; should include a "stroke" and "stroke-width" attribute; example: <tt>var cursorStyles = {"stroke":"red","stroke-width":1.5};</tt></li>
			<li><tt>selBoxStyles (array of literals with presentation attributes)</tt>:<br />an array literal containing the presentation attributes of the selection rectangle; could include CSS classes; example: <tt>var selBoxStyles = {"fill":"blue","opacity":0.5};</tt></li>
			<li><tt>allowedChars (RegExp arguments)</tt>:<br />range of allowed characters, this string will be used to create a <tt>RegExp</tt> object; example: [a-zA-Z ] or [0-9]; note that you can pass <tt>undefined</tt> or an empty string (<tt>""</tt>) if you don't want to restrict characters</li>
			<li><tt>functionToCall (function or object or undefined)</tt>:<br />callBackFunction: you can pass a function, object or undefined. In the case of function and object the parameters returned are: the groupId of the texbox (string), the text value (string) and the changetype (string (release|change)). In case of an object, it calls the method .textboxChanged(). In case of an undefined value, no callBack function is executed. The callBack function is executed with a slight delay (200ms) to allow the texbox to first update it's state before calling the callback function. The changetype parameter "change" means that a change in the textbox' textstring occured, either by adding, deleting or modifying a character; "release" means that the textbox lost the focus; "set" means that a new value was just set by the method <tt>.setValue()</tt></li>
		</ol>
        <h4>Methods</h4>
        <ul>
        	<li><tt>.getValue()</tt>:<br />returns the current value of the textbox (string)</li>
        	<li><tt>.setValue(value,fireFunction)</tt>:<br />sets the current value of the textbox (string), the second parameter (boolean) indicates whether or not the associated callBack function should be fired</li>
        	<li><tt>.moveTo(x,y)</tt>:<br />repositions the textbox. The reference point is the upper left corner of the textbox. Parameter are x and y values in viewBox coordinates.</li>
        	<li><tt>.resize(width)</tt>:<br />resizes the width of the textbox. Parameter is the new width in viewBox coordinates</li>
        </ul>
        <h4>Current Limitations, Known Issues</h4>
        <ul>
        	<li>There seems to be a bug when using the textbox in Batik and clicking directly from one textbox to the other. We are trying to track down the problem and fix it asap</li>
        	<li>MozillaSVG (versions 1.5 and 2.0) don't implement functions to determine geometries of individual characters, e.g. <tt>.getCharNumAtPosition(mySVGPoint)</tt> or <tt>.getEndPositionOfChar(position)</tt>. Hence, in these browsers, the functionality of the textbox is very limited. One can modify the textbox content, but one cannot use the cursor keys or select parts of the textstring. First tests with Firefox 3 (alias Minefield) showed that the textbox works in FF3.</li>
        	<li>Opera 9 only supports <tt>evt.keyCode</tt> and not <tt>evt.charCode</tt> or both, like other browsers. As a result one cannot distinguish certain functional keys (like arrow keys, home, end, etc.) from regular character keys when they are combined with the shift key. In this textbox implementation one cannot use certain special characters as a consequence. This affects the following keys: 35 (end key) - collides with "#", 36 (home key) - collides with "$", 37 (left key) - collides with "%", 39 (right key) - collides with "'" sign, 46 (delete key) - collides with "." sign. Currently we don't support these characters, since the codes are reserved for the functionality of the textbox. Once Opera supports evt.charCode or DOM3 keyboard events, this issue will be resolved.</li>
			<li>If you use the textbox in Internet Explorer and Adobe SVG viewer, avoid the use of the <tt>&lt;embed /&gt;</tt> element. Certain keyboard events don't work in conjunction with embed. We recommend using <tt>&lt;iframe /&gt;</tt> instead. This is likely a bug in Adobe SVG Viewer or Internet Explorer. Nothing wrong with the code of this textbox object.</li>
        </ul>
        <h4>Version history</h4>
        <ul>
        	<li>1.0 (2006-05-03): initial version</li>
        	<li>1.0.1 (2006-05-04): fixed a bug with the delete key after clicking into the texbox, fixed a bug with text selection</li>
        	<li>1.0.2 (2006-05-18): made object multi-namespace aware (hopefully), this probably needs more testing; it is now allowed to pass numbers in the constructor and .setValue() method</li>
        	<li>1.0.3 (2006-05-22): fixed a bug in internal method <tt>.testSupportsChar()</tt> when using an initially empty textbox</li>
        	<li>1.0.4 (2006-06-22): added constructor parameter this.parentNode; this.parentNode can be of type String (id) or a node reference (g or svg element)
			replaced this.textboxGroup with this.parentGroup to be compatible with other GUI elements; fixed an "out of index" bug that occasionally appeared in Opera 9 when calculating the cursor position</li>
			<li>1.1 (2006-07-11): fixed a bug with the delete key (ASV only) if cursor was at the end (thanks to David Boyd), fixed another bug with delete key if cursor was at the end it accidentally deleted the first character, fixed a bug in the method .setValue() (thanks to Volker Gersabeck); added constructor parameter <tt>textYOffset</tt>, added methods <tt>.moveTo(x,y)</tt> and <tt>.resize(width)</tt></li>
			<li>1.1.1 (2006-07-13): changed the internal structure a bit. An additional group element is now created. This allows several textboxes to be placed in the same parent group. Previously this had failed. No changes in constructor parameters and methods in this release ;-) - constructors will hopefully be stable in future releases ...</li>
			<li>1.1.2 (2006-10-04): added parameter <tt>fireFunction</tt> to the <tt>setValue()</tt> method in order to determine whether the associated callback function should be fired or not; introduced new "changetype" with value "set" which indicates that the textbox value was set by method "setValue"</li>
        </ul>
		<h4>Credits</h4>
		<ul>
			<li>Olaf Schnabel (initial version)</li>
			<li>Volker Gersabeck (providing bugs and fixes (multinamespace issue, setValue() method))</li>
			<li>David Boyd (providing bugs and fixes (delete key))</li>
		</ul>
    </div>
<br><br><hr>
<table width="100%">
<tr>
<td align="left">Last modified: 

Wednesday, 04-Oct-2006 12:35:59 CEST
<br>&copy; <a href="http://www.carto.net/#en_w3">carto<span class="expage">:</span>net</a> (<a href="/andre.mw/">andr&eacute; m. winter</a> &amp <a href="http://www.carto.net/neumann/">andreas neumann</a>)

<br>original URL for reference: http://www.carto.net/papers/svg/gui/textbox/index.shtml</td>
<td align="right" valign="top"><a class="expage" href="javascript:location.href='http://del.icio.us/post?v=3&amp;url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title)"><img src="http://images.del.icio.us/static/img/delicious.med.gif" width="16" height="16" align="bottom" alt="del.icio.us"/>&nbsp;Add this page to del.icio.us</a></td>
</tr></table>
</body></html>

